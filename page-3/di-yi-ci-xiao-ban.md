# 第一次小班

## 讨论题1

在linux环境中，用gdb对c语言程序进行汇编代码级别的调试。（要求代码中至少包括整数加减乘等运算、判断语句及调用一个函数）。调试过程至少包括如下的内容：

(1)如何打印变量的值？

(2)如何打印变量的地址？

(3)如何打印地址的数据值？

(4)如何查看内存？

(5)如何立即执行完当前的函数，但是不执行完整个应用程序？

(6)如果循环次数很多，如何执行完当前的循环？

(7)如何跟踪变量值？

(8)layout的使用。



在linux环境中，用gdb对c语言程序进行汇编代码级别的调试。（要求代码中至少包括整数加减乘等运算、判断语句及调用一个函数）。调试过程至少包括如下的内容： (1)如何打印变量的值？ (2)如何打印变量的地址？ (3)如何打印地址的数据值？ (4)如何查看内存？ (5)如何立即执行完当前的函数，但是不执行完整个应用程序？ (6)如果循环次数很多，如何执行完当前的循环？ (7)如何跟踪变量值？ (8)layout的使用。

以下是对应每个问题的解答，假设有一个名为`test.c`的C语言程序需要进行调试。

1. 如何打印变量的值？

使用`print`命令可以打印变量的值。例如，如果要打印整型变量`a`的值，可以在gdb命令行中输入：

```python
(gdb) print a
```

2. 如何打印变量的地址？

使用`&`运算符可以获取变量的地址，然后使用`print`命令打印。例如，如果要打印整型变量`a`的地址，可以在gdb命令行中输入：

```python
(gdb) print &a
```

3. 如何打印地址的数据值？

使用`x`命令可以打印地址上的数据值。例如，如果要打印地址`0x7ffeed817b24`上的数据值，可以在gdb命令行中输入：

```scss
(gdb) x 0x7ffeed817b24
```

4. 如何查看内存？

使用`x`命令可以查看内存中的数据。例如，如果要查看从地址`0x7ffeed817b20`开始的8个字节的数据，可以在gdb命令行中输入：

```scss
(gdb) x/8xb 0x7ffeed817b20
```

这里的`x`表示按字节查看，`8`表示要查看的字节数，`b`表示以二进制形式显示。

5. 如何立即执行完当前的函数，但是不执行完整个应用程序？

使用`finish`命令可以执行完当前的函数，但不执行整个应用程序。例如，在gdb命令行中输入：

```scss
(gdb) finish
```

6. 如果循环次数很多，如何执行完当前的循环？

使用`advance`命令可以执行指定次数的程序。例如，在gdb命令行中输入：

```scss
(gdb) advance 100
```

将会执行100条指令。

7. 如何跟踪变量值？

使用`watch`命令可以在变量值改变时中断程序执行，从而实现跟踪变量值的效果。例如，在gdb命令行中输入：

```css
(gdb) watch a
```

这将在变量`a`的值发生改变时中断程序执行。

8. layout的使用

`layout`命令可以在gdb中开启汇编代码窗口，同时显示源代码和汇编代码。例如，在gdb命令行中输入：

```c
(gdb) layout asm
```

这将在gdb界面中打开一个汇编代码窗口。可以使用`layout next`命令来切换到下一个窗口。

## 讨论题2

在课堂上，已经演示了一个hello.c源文件通过预处理、编译、汇编、链接等过程，最终生成一个可执行文件的过程。

在此过程中，我们是在linux操作系统下，使用gcc编译器，最后得到的是x86架构下的可执行文件。

请讨论在不同的环境下（不同的操作系统、不同的编译器、不同的指令集架构等），这个由源文件到可执行文件的过程会有什么样的不同？为什么会有这样的不同？



在不同的环境下，源文件到可执行文件的过程可能会有很多不同之处，以下是一些可能的不同点：

1. 操作系统的不同：不同的操作系统有不同的系统调用和API，这可能会影响到编译和链接过程中所需要的库文件和链接器的选择。同时，不同的操作系统还可能有不同的二进制文件格式和文件头部信息，这会影响到链接器和操作系统对可执行文件的处理。
2. 编译器的不同：不同的编译器可能支持不同的编程语言特性、语法和语义。这可能会导致编译器在处理源文件时产生不同的输出。此外，不同的编译器可能会针对不同的平台进行优化，导致生成的可执行文件在不同平台上的性能差异。
3. 指令集架构的不同：不同的指令集架构有不同的指令集、寄存器、内存布局等特点，这可能会影响到汇编器和链接器对汇编代码和可执行文件的处理。例如，在ARM架构下的程序可能需要特殊的编译选项和链接器设置。
4. 目标平台的不同：目标平台的硬件和操作系统环境不同，这会影响到可执行文件在目标平台上的运行效果和兼容性。例如，32位和64位操作系统上的可执行文件可能有不同的文件格式和ABI（应用程序二进制接口）。
5. 库文件的不同：不同的库文件可能会有不同的版本、接口和链接方式，这会影响到可执行文件对库文件的依赖关系和兼容性。

总之，由源文件到可执行文件的过程中，不同的环境可能会产生各种不同的影响，包括编译器、操作系统、指令集架构、目标平台、库文件等等。这些影响可能会导致生成的可执行文件在不同的环境中表现出不同的行为，需要开发者在不同的环境中进行适当的调整和测试。

## 讨论题3

在本课程中，选用c语言程序来进行演示与说明。而我们大一的高级程序设计和数据结构等课程是使用的c++语言。

请讨论： （1）日常编程序时，有非常多的语言，除了上述提到的c，c++外，还有java，python,php,c#等，有哪些分类方法，都是按照什么来分类？

（2）为什么本课程要采用c语言？如果是采用c++语言来进行演示，会带来哪些影响？



(1) 日常编程序时，常用的编程语言可以按照以下几种分类方法：

* 根据应用领域：不同的编程语言有不同的应用领域。例如，C和C++通常用于系统编程和底层开发，Java用于Web应用和企业应用，Python用于科学计算和数据分析，PHP用于Web开发等等。
* 根据编程范式：编程语言可以根据支持的编程范式进行分类。例如，C和C++支持过程式编程和面向对象编程，Python支持函数式编程和面向对象编程，Haskell支持纯函数式编程等等。
* 根据执行方式：编程语言可以根据其执行方式进行分类。例如，编译型语言（如C和C++）需要将源代码编译成机器码才能执行，而解释型语言（如Python和Ruby）则通过解释器来逐行解释执行源代码。
* 根据语言特性：编程语言可以根据其语言特性进行分类。例如，静态类型语言（如C++和Java）需要在编译时检查类型，而动态类型语言（如Python和Ruby）则在运行时检查类型。
* 根据流行程度：编程语言可以根据其流行程度进行分类。例如，目前最流行的编程语言之一是JavaScript，它被广泛用于Web前端开发和后端开发。

(2) 为什么本课程要采用c语言？如果是采用c++语言来进行演示，会带来哪些影响？

本课程采用C语言是因为C语言是一种比较底层的编程语言，它可以很好地帮助学生理解计算机系统的底层原理，包括内存管理、指针等。此外，C语言也是一种比较常用的编程语言，在操作系统、嵌入式开发、游戏开发等领域有广泛的应用。

如果本课程采用C++语言来进行演示，会有以下几点影响：

1. C++语言相对于C语言来说，有更多的特性和语法，对于初学者来说，学习曲线相对较陡峭。因此，可能会使得课程难度增加，学生学习起来更加困难。
2. C++语言中的面向对象编程思想比C语言更为突出，如果使用C++语言来进行演示，可能会导致学生更关注面向对象编程思想，而忽略了本课程中的计算机系统底层原理。
3. 在C++语言中，相对于C语言来说，有更多的抽象层次，对于计算机底层原理的理解会有一些影响。比如，C++中有STL库，而这些库中的容器、迭代器等，都是对C++语言特性的封装，对于学习计算机底层原理来说，这些封装是不利的。

总之，选择C语言作为本课程的主要编程语言，是因为它更符合本课程的教学目标和学生的学习情况。
